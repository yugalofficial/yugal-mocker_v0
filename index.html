<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yugal Mocker - All India Mock Test Series</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #4e73df;
            --secondary-color: #1cc88a;
            --dark-color: #5a5c69;
            --light-color: #f8f9fc;
        }
        
        body {
            font-family: 'Nunito', sans-serif;
            background-color: var(--light-color);
        }
        
        .navbar-brand {
            font-weight: 800;
            font-size: 1.5rem;
        }
        
        .navbar {
            box-shadow: 0 0.15rem 1.75rem 0 rgba(58, 59, 69, 0.15);
        }
        
        .hero-section {
            background: linear-gradient(135deg, var(--primary-color) 0%, #224abe 100%);
            color: white;
            padding: 4rem 0;
            border-radius: 0 0 20px 20px;
        }
        
        .test-card {
            transition: transform 0.3s, box-shadow 0.3s;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 20px;
        }
        
        .test-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
        }
        
        .test-card-header {
            background-color: var(--primary-color);
            color: white;
            padding: 15px;
        }
        
        .test-card-body {
            padding: 20px;
        }
        
        .btn-primary {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
        }
        
        .btn-success {
            background-color: var(--secondary-color);
            border-color: var(--secondary-color);
        }
        
        .dashboard-card {
            border-left: 5px solid var(--primary-color);
            border-radius: 5px;
        }
        
        .progress {
            height: 1rem;
        }
        
        .sidebar {
            background-color: #fff;
            min-height: 100vh;
            box-shadow: 0 0.15rem 1.75rem 0 rgba(58, 59, 69, 0.15);
        }
        
        .sidebar .nav-link {
            color: var(--dark-color);
            padding: 1rem;
            font-weight: 600;
        }
        
        .sidebar .nav-link.active {
            color: var(--primary-color);
            background-color: var(--light-color);
        }
        
        .sidebar .nav-link:hover {
            color: var(--primary-color);
        }
        
        .question-container {
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 0.15rem 1.75rem 0 rgba(58, 59, 69, 0.1);
            margin-bottom: 20px;
        }
        
        .option-item {
            padding: 10px;
            margin: 5px 0;
            border: 1px solid #ddd;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .option-item:hover {
            background-color: #f8f9fa;
        }
        
        .option-item.selected {
            background-color: #e9f7fe;
            border-color: var(--primary-color);
        }
        
        .option-item.correct {
            background-color: #d4edda;
            border-color: #c3e6cb;
        }
        
        .option-item.incorrect {
            background-color: #f8d7da;
            border-color: #f5c6cb;
        }
        
        .timer {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary-color);
        }
        
        .analysis-card {
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 20px;
        }
        
        .analysis-card-header {
            padding: 15px;
            font-weight: bold;
        }
        
        .motivation-card {
            background-color: #f8f9fa;
            border-left: 5px solid var(--secondary-color);
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 5px;
        }
        
        .test-interface-header {
            background-color: white;
            padding: 15px;
            box-shadow: 0 0.15rem 1.75rem 0 rgba(58, 59, 69, 0.1);
            margin-bottom: 20px;
            border-radius: 10px;
        }
        
        @media (max-width: 768px) {
            .sidebar {
                min-height: auto;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-white shadow">
        <div class="container">
            <a class="navbar-brand text-primary" href="#">Yugal Mocker</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link text-dark" href="#home">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link text-dark" href="#test-series">Test Series</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link text-dark" href="#about">About</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link text-dark" href="#contact">Contact</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link btn btn-primary text-white ms-2" href="#" id="loginBtn">Login</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link btn btn-outline-primary ms-2" href="#" id="signupBtn">Sign Up</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content (Visible when not logged in) -->
    <div id="mainContent">
        <!-- Hero Section -->
        <section class="hero-section" id="home">
            <div class="container text-center">
                <h1 class="display-4 fw-bold mb-4">All India Mock Test Series</h1>
                <p class="lead mb-5">Practice with the best mock tests for SSC, GATE, JEE, NEET and more. Get real-time analysis and improve your performance.</p>
                <div class="d-flex justify-content-center gap-3">
                    <a href="#test-series" class="btn btn-light btn-lg px-4">Explore Tests</a>
                    <a href="#" class="btn btn-outline-light btn-lg px-4" id="heroSignupBtn">Sign Up Free</a>
                </div>
            </div>
        </section>

        <!-- Upcoming Tests -->
        <div class="container my-5">
            <section id="upcoming-tests" class="mb-5">
                <h2 class="mb-4">Upcoming All India Tests</h2>
                <div class="row">
                    <div class="col-md-4">
                        <div class="test-card">
                            <div class="test-card-header">
                                <h5 class="mb-0">SSC CGL Tier-I</h5>
                            </div>
                            <div class="test-card-body">
                                <p><i class="far fa-calendar-alt me-2"></i> Next Sunday, 10:00 AM</p>
                                <p><i class="fas fa-users me-2"></i> 5,000+ registered</p>
                                <div class="d-flex justify-content-between align-items-center">
                                    <span class="badge bg-success">Free</span>
                                    <a href="#" class="btn btn-sm btn-primary start-test-btn" data-test-id="ssc1">Register Now</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="test-card">
                            <div class="test-card-header bg-success">
                                <h5 class="mb-0">NEET 2024</h5>
                            </div>
                            <div class="test-card-body">
                                <p><i class="far fa-calendar-alt me-2"></i> Next Sunday, 2:00 PM</p>
                                <p><i class="fas fa-users me-2"></i> 3,200+ registered</p>
                                <div class="d-flex justify-content-between align-items-center">
                                    <span class="badge bg-warning text-dark">Premium</span>
                                    <a href="#" class="btn btn-sm btn-success start-test-btn" data-test-id="neet1">Register Now</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="test-card">
                            <div class="test-card-header bg-warning">
                                <h5 class="mb-0">GATE 2025</h5>
                            </div>
                            <div class="test-card-body">
                                <p><i class="far fa-calendar-alt me-2"></i> Next Sunday, 4:00 PM</p>
                                <p><i class="fas fa-users me-2"></i> 2,800+ registered</p>
                                <div class="d-flex justify-content-between align-items-center">
                                    <span class="badge bg-success">Free</span>
                                    <a href="#" class="btn btn-sm btn-primary start-test-btn" data-test-id="gate1">Register Now</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Test Categories -->
            <section id="test-series" class="mb-5">
                <h2 class="mb-4">Test Series Categories</h2>
                <div class="row">
                    <div class="col-md-3 mb-4">
                        <div class="card h-100">
                            <div class="card-body text-center">
                                <i class="fas fa-graduation-cap fa-3x mb-3 text-primary"></i>
                                <h5 class="card-title">SSC Exams</h5>
                                <p class="card-text">CGL, CHSL, MTS, GD, Steno and more</p>
                                <a href="#" class="btn btn-outline-primary">View Tests</a>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3 mb-4">
                        <div class="card h-100">
                            <div class="card-body text-center">
                                <i class="fas fa-flask fa-3x mb-3 text-success"></i>
                                <h5 class="card-title">Engineering</h5>
                                <p class="card-text">GATE, JEE Main, JEE Advanced, BITSAT</p>
                                <a href="#" class="btn btn-outline-success">View Tests</a>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3 mb-4">
                        <div class="card h-100">
                            <div class="card-body text-center">
                                <i class="fas fa-medkit fa-3x mb-3 text-danger"></i>
                                <h5 class="card-title">Medical</h5>
                                <p class="card-text">NEET, AIIMS, JIPMER, PGIMER</p>
                                <a href="#" class="btn btn-outline-danger">View Tests</a>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3 mb-4">
                        <div class="card h-100">
                            <div class="card-body text-center">
                                <i class="fas fa-landmark fa-3x mb-3 text-warning"></i>
                                <h5 class="card-title">Civil Services</h5>
                                <p class="card-text">UPSC Prelims, Mains, State PSCs</p>
                                <a href="#" class="btn btn-outline-warning">View Tests</a>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Features -->
            <section id="features" class="mb-5">
                <h2 class="mb-4">Why Choose Yugal Mocker?</h2>
                <div class="row">
                    <div class="col-md-4 mb-4">
                        <div class="card h-100">
                            <div class="card-body">
                                <div class="d-flex align-items-center mb-3">
                                    <div class="bg-primary bg-opacity-10 p-3 rounded me-3">
                                        <i class="fas fa-chart-line fa-2x text-primary"></i>
                                    </div>
                                    <h5 class="mb-0">Real-time Analysis</h5>
                                </div>
                                <p class="card-text">Get detailed performance analysis with All India ranking, section-wise breakdown, and improvement areas.</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-4">
                        <div class="card h-100">
                            <div class="card-body">
                                <div class="d-flex align-items-center mb-3">
                                    <div class="bg-success bg-opacity-10 p-3 rounded me-3">
                                        <i class="fas fa-users fa-2x text-success"></i>
                                    </div>
                                    <h5 class="mb-0">All India Ranking</h5>
                                </div>
                                <p class="card-text">Compete with thousands of aspirants across India and see where you stand.</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-4">
                        <div class="card h-100">
                            <div class="card-body">
                                <div class="d-flex align-items-center mb-3">
                                    <div class="bg-info bg-opacity-10 p-3 rounded me-3">
                                        <i class="fas fa-book-open fa-2x text-info"></i>
                                    </div>
                                    <h5 class="mb-0">Detailed Solutions</h5>
                                </div>
                                <p class="card-text">Access detailed solutions and explanations for every question to understand concepts better.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>

    <!-- Test Interface (Hidden by default) -->
    <div id="testInterface" style="display: none;">
        <div class="container-fluid">
            <div class="row">
                <!-- Sidebar -->
                <div class="col-md-2 sidebar p-0">
                    <div class="p-3">
                        <h5 class="text-center mb-4">Test Navigator</h5>
                        <div class="d-flex justify-content-between mb-3">
                            <span class="text-muted">Questions</span>
                            <span id="answeredCount">0</span>/<span id="totalQuestions">30</span>
                        </div>
                        <div class="question-palette mb-4">
                            <div class="row g-2" id="questionPalette">
                                <!-- Question numbers will be added dynamically -->
                            </div>
                        </div>
                        <div class="timer-container text-center mb-4">
                            <div class="timer" id="testTimer">30:00</div>
                        </div>
                        <div class="d-grid gap-2">
                            <button class="btn btn-primary" id="submitTestBtn">Submit Test</button>
                            <button class="btn btn-outline-secondary" id="quitTestBtn">Quit Test</button>
                        </div>
                    </div>
                </div>
                
                <!-- Main Content -->
                <div class="col-md-10 p-4">
                    <div class="test-interface-header">
                        <div class="d-flex justify-content-between align-items-center">
                            <h4 id="testTitle">Quantitative Aptitude</h4>
                            <div class="d-flex gap-3">
                                <button class="btn btn-sm btn-outline-primary" id="markForReviewBtn">Mark & Save For Review</button>
                                <button class="btn btn-sm btn-primary" id="clearResponseBtn">Clear Response</button>
                                <button class="btn btn-sm btn-success" id="saveNextBtn">Save & Next</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="question-container">
                        <div class="question-text mb-4">
                            <h5>Question <span id="currentQuestionNumber">1</span></h5>
                            <p id="questionText">A shopkeeper gives a 10% discount and still earns 10% profit. The marked price of the item is how many times (correct to 2 decimal places) the cost price?</p>
                        </div>
                        
                        <div class="options-container" id="optionsContainer">
                            <div class="option-item" data-option="1">
                                <input type="radio" name="questionOption" id="option1" class="me-2">
                                <label for="option1">1.28</label>
                            </div>
                            <div class="option-item" data-option="2">
                                <input type="radio" name="questionOption" id="option2" class="me-2">
                                <label for="option2">1.24</label>
                            </div>
                            <div class="option-item" data-option="3">
                                <input type="radio" name="questionOption" id="option3" class="me-2">
                                <label for="option3">1.22</label>
                            </div>
                            <div class="option-item" data-option="4">
                                <input type="radio" name="questionOption" id="option4" class="me-2">
                                <label for="option4">1.20</label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Dashboard Interface (Hidden by default) -->
    <div id="dashboardInterface" style="display: none;">
        <div class="container-fluid">
            <div class="row">
                <!-- Sidebar -->
                <div class="col-md-2 sidebar p-0">
                    <div class="p-3">
                        <div class="text-center mb-4">
                            <img src="https://via.placeholder.com/80" class="rounded-circle mb-2" alt="Profile">
                            <h6 id="userName">User Name</h6>
                            <small class="text-muted" id="userEmail">user@example.com</small>
                        </div>
                        <ul class="nav flex-column">
                            <li class="nav-item">
                                <a class="nav-link active" href="#dashboard"><i class="fas fa-tachometer-alt me-2"></i> Dashboard</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#my-tests"><i class="fas fa-clipboard-list me-2"></i> My Tests</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#test-series"><i class="fas fa-book me-2"></i> Test Series</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#performance"><i class="fas fa-chart-line me-2"></i> Performance</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#bookmarks"><i class="fas fa-bookmark me-2"></i> Bookmarks</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#profile"><i class="fas fa-user me-2"></i> Profile</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#" id="logoutBtn"><i class="fas fa-sign-out-alt me-2"></i> Logout</a>
                            </li>
                        </ul>
                    </div>
                </div>
                
                <!-- Main Content -->
                <div class="col-md-10 p-4">
                    <h3 class="mb-4">Dashboard</h3>
                    
                    <!-- Stats Cards -->
                    <div class="row mb-4">
                        <div class="col-md-3">
                            <div class="card dashboard-card">
                                <div class="card-body">
                                    <h6 class="card-subtitle mb-2 text-muted">Tests Attempted</h6>
                                    <h3 class="card-title">12</h3>
                                    <p class="card-text text-success"><small>+2 this week</small></p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card dashboard-card">
                                <div class="card-body">
                                    <h6 class="card-subtitle mb-2 text-muted">All India Rank</h6>
                                    <h3 class="card-title">#1,245</h3>
                                    <p class="card-text text-success"><small>Improved by 324</small></p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card dashboard-card">
                                <div class="card-body">
                                    <h6 class="card-subtitle mb-2 text-muted">Accuracy</h6>
                                    <h3 class="card-title">78%</h3>
                                    <div class="progress mt-2">
                                        <div class="progress-bar bg-success" role="progressbar" style="width: 78%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card dashboard-card">
                                <div class="card-body">
                                    <h6 class="card-subtitle mb-2 text-muted">Next Test</h6>
                                    <h5 class="card-title">SSC CGL Tier-I</h5>
                                    <p class="card-text"><small>Sunday, 10:00 AM</small></p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Recent Tests -->
                    <div class="card mb-4">
                        <div class="card-header bg-white">
                            <h5 class="mb-0">Recent Test Attempts</h5>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>Test Name</th>
                                            <th>Date</th>
                                            <th>Score</th>
                                            <th>Rank</th>
                                            <th>Accuracy</th>
                                            <th>Action</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>SSC CGL Tier-I Mock 15</td>
                                            <td>Apr 24, 2024</td>
                                            <td>145/200</td>
                                            <td>#1,245</td>
                                            <td>82%</td>
                                            <td><a href="#" class="btn btn-sm btn-outline-primary view-analysis-btn" data-test-id="test1">View Analysis</a></td>
                                        </tr>
                                        <tr>
                                            <td>SSC CHSL Mock 8</td>
                                            <td>Apr 17, 2024</td>
                                            <td>120/200</td>
                                            <td>#2,156</td>
                                            <td>75%</td>
                                            <td><a href="#" class="btn btn-sm btn-outline-primary view-analysis-btn" data-test-id="test2">View Analysis</a></td>
                                        </tr>
                                        <tr>
                                            <td>All India SSC GK Test</td>
                                            <td>Apr 10, 2024</td>
                                            <td>85/100</td>
                                            <td>#856</td>
                                            <td>85%</td>
                                            <td><a href="#" class="btn btn-sm btn-outline-primary view-analysis-btn" data-test-id="test3">View Analysis</a></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Performance Analysis -->
                    <div class="row">
                        <div class="col-md-6 mb-4">
                            <div class="card h-100">
                                <div class="card-header bg-white">
                                    <h5 class="mb-0">Section-wise Performance</h5>
                                </div>
                                <div class="card-body">
                                    <canvas id="sectionPerformanceChart" height="300"></canvas>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 mb-4">
                            <div class="card h-100">
                                <div class="card-header bg-white">
                                    <h5 class="mb-0">Progress Over Time</h5>
                                </div>
                                <div class="card-body">
                                    <canvas id="progressChart" height="300"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Motivation and Feedback -->
                    <div class="motivation-card">
                        <h5><i class="fas fa-lightbulb me-2 text-warning"></i> Improvement Tip</h5>
                        <p>Your performance in Quantitative Aptitude is strong (85% accuracy), but you need to focus more on General Awareness (62% accuracy). Try spending 30 minutes daily on current affairs to improve.</p>
                        <p class="mb-0"><strong>Motivation:</strong> "Success is the sum of small efforts, repeated day in and day out." - Robert Collier</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Test Analysis Interface (Hidden by default) -->
    <div id="testAnalysisInterface" style="display: none;">
        <div class="container-fluid">
            <div class="row">
                <!-- Sidebar -->
                <div class="col-md-2 sidebar p-0">
                    <div class="p-3">
                        <div class="text-center mb-4">
                            <img src="https://via.placeholder.com/80" class="rounded-circle mb-2" alt="Profile">
                            <h6 id="analysisUserName">User Name</h6>
                            <small class="text-muted" id="analysisUserEmail">user@example.com</small>
                        </div>
                        <ul class="nav flex-column">
                            <li class="nav-item">
                                <a class="nav-link" href="#" id="backToDashboard"><i class="fas fa-arrow-left me-2"></i> Back to Dashboard</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link active" href="#test-summary"><i class="fas fa-clipboard-check me-2"></i> Test Summary</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#sectional-analysis"><i class="fas fa-chart-pie me-2"></i> Sectional Analysis</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#question-analysis"><i class="fas fa-question-circle me-2"></i> Question Analysis</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#solutions"><i class="fas fa-book-open me-2"></i> Solutions</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#rank-analysis"><i class="fas fa-trophy me-2"></i> Rank Analysis</a>
                            </li>
                        </ul>
                    </div>
                </div>
                
                <!-- Main Content -->
                <div class="col-md-10 p-4">
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <div>
                            <h3>SSC CGL Tier-I Mock Test 15 - Analysis</h3>
                            <p class="text-muted mb-0">Attempted on Apr 24, 2024 | Duration: 1 Hour</p>
                        </div>
                        <div class="text-end">
                            <h4 class="text-success">145/200</h4>
                            <p class="text-muted mb-0">All India Rank: #1,245</p>
                        </div>
                    </div>
                    
                    <!-- Test Summary -->
                    <div class="card mb-4">
                        <div class="card-header bg-white">
                            <h5 class="mb-0">Test Summary</h5>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="analysis-card">
                                        <div class="analysis-card-header bg-primary text-white">
                                            Attempted Questions
                                        </div>
                                        <div class="analysis-card-body p-3 text-center">
                                            <h2>65</h2>
                                            <p>out of 100</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="analysis-card">
                                        <div class="analysis-card-header bg-success text-white">
                                            Correct Answers
                                        </div>
                                        <div class="analysis-card-body p-3 text-center">
                                            <h2>53</h2>
                                            <p>Accuracy: 81.5%</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="analysis-card">
                                        <div class="analysis-card-header bg-danger text-white">
                                            Wrong Answers
                                        </div>
                                        <div class="analysis-card-body p-3 text-center">
                                            <h2>12</h2>
                                            <p>Negative Marks: -4</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Sectional Analysis -->
                    <div class="card mb-4">
                        <div class="card-header bg-white">
                            <h5 class="mb-0">Sectional Analysis</h5>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>Section</th>
                                            <th>Questions</th>
                                            <th>Attempted</th>
                                            <th>Correct</th>
                                            <th>Wrong</th>
                                            <th>Score</th>
                                            <th>Accuracy</th>
                                            <th>Percentile</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>Quantitative Aptitude</td>
                                            <td>25</td>
                                            <td>20</td>
                                            <td>18</td>
                                            <td>2</td>
                                            <td>70/75</td>
                                            <td>90%</td>
                                            <td>95.4</td>
                                        </tr>
                                        <tr>
                                            <td>General Intelligence</td>
                                            <td>25</td>
                                            <td>22</td>
                                            <td>17</td>
                                            <td>5</td>
                                            <td>49/75</td>
                                            <td>77.3%</td>
                                            <td>82.1</td>
                                        </tr>
                                        <tr>
                                            <td>English Language</td>
                                            <td>25</td>
                                            <td>15</td>
                                            <td>12</td>
                                            <td>3</td>
                                            <td>33/75</td>
                                            <td>80%</td>
                                            <td>78.5</td>
                                        </tr>
                                        <tr>
                                            <td>General Awareness</td>
                                            <td>25</td>
                                            <td>8</td>
                                            <td>6</td>
                                            <td>2</td>
                                            <td>16/75</td>
                                            <td>75%</td>
                                            <td>65.2</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Question Analysis -->
                    <div class="card mb-4">
                        <div class="card-header bg-white">
                            <h5 class="mb-0">Question Analysis</h5>
                        </div>
                        <div class="card-body">
                            <div class="question-container">
                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <h5>Question 1</h5>
                                    <span class="badge bg-success">Correct</span>
                                </div>
                                <div class="question-text mb-4">
                                    <p>A shopkeeper gives a 10% discount and still earns 10% profit. The marked price of the item is how many times (correct to 2 decimal places) the cost price?</p>
                                </div>
                                
                                <div class="options-container mb-4">
                                    <div class="option-item">
                                        <input type="radio" name="analysisOption" id="analysisOption1" class="me-2" disabled>
                                        <label for="analysisOption1">1.28</label>
                                    </div>
                                    <div class="option-item">
                                        <input type="radio" name="analysisOption" id="analysisOption2" class="me-2" disabled>
                                        <label for="analysisOption2">1.24</label>
                                    </div>
                                    <div class="option-item correct">
                                        <input type="radio" name="analysisOption" id="analysisOption3" class="me-2" checked disabled>
                                        <label for="analysisOption3">1.22</label>
                                    </div>
                                    <div class="option-item">
                                        <input type="radio" name="analysisOption" id="analysisOption4" class="me-2" disabled>
                                        <label for="analysisOption4">1.20</label>
                                    </div>
                                </div>
                                
                                <div class="solution-container">
                                    <h6>Solution:</h6>
                                    <p>Let the cost price (CP) be ₹100.</p>
                                    <p>With 10% profit, selling price (SP) = ₹110</p>
                                    <p>This SP is after 10% discount on marked price (MP).</p>
                                    <p>So, 90% of MP = ₹110 → MP = ₹110 × (100/90) = ₹122.22</p>
                                    <p>Therefore, MP/CP = 122.22/100 = 1.22</p>
                                    <p class="text-success"><strong>Correct Answer: 1.22</strong></p>
                                </div>
                                
                                <div class="statistics mt-4">
                                    <h6>Statistics:</h6>
                                    <div class="row">
                                        <div class="col-md-3">
                                            <p><strong>Attempted:</strong> 89%</p>
                                        </div>
                                        <div class="col-md-3">
                                            <p><strong>Correct:</strong> 45%</p>
                                        </div>
                                        <div class="col-md-3">
                                            <p><strong>Difficulty:</strong> Medium</p>
                                        </div>
                                        <div class="col-md-3">
                                            <p><strong>Time Taken:</strong> 45s (Avg: 62s)</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Rank Analysis -->
                    <div class="card">
                        <div class="card-header bg-white">
                            <h5 class="mb-0">Rank Analysis</h5>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-6">
                                    <h6>Percentile: 92.5</h6>
                                    <div class="progress mb-4">
                                        <div class="progress-bar bg-success" role="progressbar" style="width: 92.5%"></div>
                                    </div>
                                    
                                    <h6>Score Distribution</h6>
                                    <canvas id="scoreDistributionChart" height="200"></canvas>
                                </div>
                                <div class="col-md-6">
                                    <h6>Top Performers</h6>
                                    <div class="table-responsive">
                                        <table class="table">
                                            <thead>
                                                <tr>
                                                    <th>Rank</th>
                                                    <th>Name</th>
                                                    <th>Score</th>
                                                    <th>Accuracy</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>1</td>
                                                    <td>Rahul Sharma</td>
                                                    <td>195/200</td>
                                                    <td>97.5%</td>
                                                </tr>
                                                <tr>
                                                    <td>2</td>
                                                    <td>Priya Patel</td>
                                                    <td>188/200</td>
                                                    <td>94%</td>
                                                </tr>
                                                <tr>
                                                    <td>3</td>
                                                    <td>Amit Singh</td>
                                                    <td>182/200</td>
                                                    <td>91%</td>
                                                </tr>
                                                <tr>
                                                    <td>...</td>
                                                    <td>...</td>
                                                    <td>...</td>
                                                    <td>...</td>
                                                </tr>
                                                <tr>
                                                    <td>1,245</td>
                                                    <td>You</td>
                                                    <td>145/200</td>
                                                    <td>81.5%</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-dark text-white py-5" id="mainFooter">
        <div class="container">
            <div class="row">
                <div class="col-md-4 mb-4">
                    <h5>Yugal Mocker</h5>
                    <p>All India Mock Test Series for competitive exams like SSC, GATE, JEE, NEET and more.</p>
                </div>
                <div class="col-md-2 mb-4">
                    <h5>Quick Links</h5>
                    <ul class="list-unstyled">
                        <li><a href="#" class="text-white">Home</a></li>
                        <li><a href="#" class="text-white">Test Series</a></li>
                        <li><a href="#" class="text-white">About Us</a></li>
                        <li><a href="#" class="text-white">Contact</a></li>
                    </ul>
                </div>
                <div class="col-md-3 mb-4">
                    <h5>Test Categories</h5>
                    <ul class="list-unstyled">
                        <li><a href="#" class="text-white">SSC Exams</a></li>
                        <li><a href="#" class="text-white">Engineering</a></li>
                        <li><a href="#" class="text-white">Medical</a></li>
                        <li><a href="#" class="text-white">Civil Services</a></li>
                    </ul>
                </div>
                <div class="col-md-3 mb-4">
                    <h5>Contact Us</h5>
                    <ul class="list-unstyled">
                        <li><i class="fas fa-envelope me-2"></i> support@yugalmocker.com</li>
                        <li><i class="fas fa-phone me-2"></i> +91 9876543210</li>
                        <li><i class="fas fa-map-marker-alt me-2"></i> New Delhi, India</li>
                    </ul>
                </div>
            </div>
            <hr class="my-4 bg-secondary">
            <div class="row">
                <div class="col-md-6">
                    <p class="mb-0">&copy; 2024 Yugal Mocker. All rights reserved.</p>
                </div>
                <div class="col-md-6 text-md-end">
                    <a href="#" class="text-white me-3"><i class="fab fa-facebook-f"></i></a>
                    <a href="#" class="text-white me-3"><i class="fab fa-twitter"></i></a>
                    <a href="#" class="text-white me-3"><i class="fab fa-instagram"></i></a>
                    <a href="#" class="text-white"><i class="fab fa-linkedin-in"></i></a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Login Modal -->
    <div class="modal fade" id="loginModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Login to Your Account</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="loginForm">
                        <div class="mb-3">
                            <label for="loginEmail" class="form-label">Email address</label>
                            <input type="email" class="form-control" id="loginEmail" required>
                        </div>
                        <div class="mb-3">
                            <label for="loginPassword" class="form-label">Password</label>
                            <input type="password" class="form-control" id="loginPassword" required>
                        </div>
                        <div class="mb-3 form-check">
                            <input type="checkbox" class="form-check-input" id="rememberMe">
                            <label class="form-check-label" for="rememberMe">Remember me</label>
                        </div>
                        <button type="submit" class="btn btn-primary w-100">Login</button>
                    </form>
                    <div class="text-center mt-3">
                        <p>Don't have an account? <a href="#" id="showSignupFromLogin">Sign up</a></p>
                        <p><a href="#">Forgot password?</a></p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Signup Modal -->
    <div class="modal fade" id="signupModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Create Your Account</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="signupForm">
                        <div class="mb-3">
                            <label for="signupName" class="form-label">Full Name</label>
                            <input type="text" class="form-control" id="signupName" required>
                        </div>
                        <div class="mb-3">
                            <label for="signupEmail" class="form-label">Email address</label>
                            <input type="email" class="form-control" id="signupEmail" required>
                        </div>
                        <div class="mb-3">
                            <label for="signupPassword" class="form-label">Password</label>
                            <input type="password" class="form-control" id="signupPassword" required>
                        </div>
                        <div class="mb-3">
                            <label for="signupConfirmPassword" class="form-label">Confirm Password</label>
                            <input type="password" class="form-control" id="signupConfirmPassword" required>
                        </div>
                        <div class="mb-3">
                            <label for="signupExamCategory" class="form-label">Primary Exam Category</label>
                            <select class="form-select" id="signupExamCategory" required>
                                <option value="">Select your exam category</option>
                                <option value="ssc">SSC Exams</option>
                                <option value="engineering">Engineering (GATE, JEE)</option>
                                <option value="medical">Medical (NEET, AIIMS)</option>
                                <option value="upsc">UPSC Civil Services</option>
                                <option value="banking">Banking Exams</option>
                                <option value="defense">Defense Exams</option>
                                <option value="state-exams">State Level Exams</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        <div class="mb-3 form-check">
                            <input type="checkbox" class="form-check-input" id="agreeTerms" required>
                            <label class="form-check-label" for="agreeTerms">I agree to the <a href="#">Terms and Conditions</a></label>
                        </div>
                        <button type="submit" class="btn btn-primary w-100">Create Account</button>
                    </form>
                    <div class="text-center mt-3">
                        <p>Already have an account? <a href="#" id="showLoginFromSignup">Login</a></p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

        // Demo questions data
        const demoQuestions = [
            {
                id: 1,
                text: "A shopkeeper gives a 10% discount and still earns 10% profit. The marked price of the item is how many times (correct to 2 decimal places) the cost price?",
                options: ["1.28", "1.24", "1.22", "1.20"],
                correctAnswer: 2, // Index of correct answer (0-based)
                solution: "Let the cost price (CP) be ₹100. With 10% profit, selling price (SP) = ₹110. This SP is after 10% discount on marked price (MP). So, 90% of MP = ₹110 → MP = ₹110 × (100/90) = ₹122.22. Therefore, MP/CP = 122.22/100 = 1.22",
                difficulty: "Medium",
                attempted: 89,
                correct: 45,
                avgTime: 62
            },
            {
                id: 2,
                text: "If the ratio of the ages of A and B is 3:5 and the sum of their ages is 80 years, what is the age of B?",
                options: ["30 years", "40 years", "50 years", "60 years"],
                correctAnswer: 2,
                solution: "Let the ages of A and B be 3x and 5x respectively. According to the problem, 3x + 5x = 80 → 8x = 80 → x = 10. Therefore, age of B = 5x = 5 × 10 = 50 years.",
                difficulty: "Easy",
                attempted: 95,
                correct: 78,
                avgTime: 45
            },
            {
                id: 3,
                text: "A train 150 meters long is running at a speed of 90 km/h. How long will it take to pass a 200-meter-long platform?",
                options: ["10 seconds", "12 seconds", "14 seconds", "16 seconds"],
                correctAnswer: 2,
                solution: "Total distance to cover = length of train + length of platform = 150 + 200 = 350 meters. Speed = 90 km/h = 90 × (5/18) = 25 m/s. Time = Distance/Speed = 350/25 = 14 seconds.",
                difficulty: "Medium",
                attempted: 82,
                correct: 55,
                avgTime: 75
            }
        ];

        // Current test state
        let currentTest = {
            id: null,
            questions: [],
            currentQuestionIndex: 0,
            responses: {},
            markedForReview: [],
            startTime: null,
            timerInterval: null
        };

        // Login/Signup Modal Toggle
        document.getElementById('loginBtn').addEventListener('click', function() {
            var loginModal = new bootstrap.Modal(document.getElementById('loginModal'));
            loginModal.show();
        });
        
        document.getElementById('signupBtn').addEventListener('click', function() {
            var signupModal = new bootstrap.Modal(document.getElementById('signupModal'));
            signupModal.show();
        });
        
        document.getElementById('heroSignupBtn').addEventListener('click', function() {
            var signupModal = new bootstrap.Modal(document.getElementById('signupModal'));
            signupModal.show();
        });
        
        document.getElementById('showSignupFromLogin').addEventListener('click', function(e) {
            e.preventDefault();
            var loginModal = bootstrap.Modal.getInstance(document.getElementById('loginModal'));
            loginModal.hide();
            var signupModal = new bootstrap.Modal(document.getElementById('signupModal'));
            signupModal.show();
        });
        
        document.getElementById('showLoginFromSignup').addEventListener('click', function(e) {
            e.preventDefault();
            var signupModal = bootstrap.Modal.getInstance(document.getElementById('signupModal'));
            signupModal.hide();
            var loginModal = new bootstrap.Modal(document.getElementById('loginModal'));
            loginModal.show();
        });
        
        // Form Submission
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            // Simulate login
            showDashboard();
            var loginModal = bootstrap.Modal.getInstance(document.getElementById('loginModal'));
            loginModal.hide();
        });
        
        document.getElementById('signupForm').addEventListener('submit', function(e) {
            e.preventDefault();
            // Simulate signup
            var signupModal = bootstrap.Modal.getInstance(document.getElementById('signupModal'));
            signupModal.hide();
            
            // Show success message
            alert('Account created successfully! Please login to continue.');
            var loginModal = new bootstrap.Modal(document.getElementById('loginModal'));
            loginModal.show();
        });
        
        // Test Interface
        document.querySelectorAll('.option-item').forEach(item => {
            item.addEventListener('click', function() {
                const options = document.querySelectorAll('.option-item');
                options.forEach(opt => opt.classList.remove('selected'));
                this.classList.add('selected');
                const radio = this.querySelector('input[type="radio"]');
                radio.checked = true;
                
                // Save response
                const questionNumber = currentTest.currentQuestionIndex + 1;
                const selectedOption = parseInt(this.getAttribute('data-option'));
                currentTest.responses[questionNumber] = selectedOption;
                
                // Update answered count
                updateAnsweredCount();
            });
        });
        
        // Start test buttons
        document.querySelectorAll('.start-test-btn').forEach(btn => {
            btn.addEventListener('click', function(e) {
                e.preventDefault();
                const testId = this.getAttribute('data-test-id');
                startTest(testId);
            });
        });
        
        // View analysis buttons
        document.querySelectorAll('.view-analysis-btn').forEach(btn => {
            btn.addEventListener('click', function(e) {
                e.preventDefault();
                showTestAnalysis();
            });
        });
        
        // Navigation buttons
        document.getElementById('saveNextBtn').addEventListener('click', function() {
            navigateQuestion(1);
        });
        
        document.getElementById('markForReviewBtn').addEventListener('click', function() {
            const questionNumber = currentTest.currentQuestionIndex + 1;
            if (currentTest.markedForReview.includes(questionNumber)) {
                currentTest.markedForReview = currentTest.markedForReview.filter(q => q !== questionNumber);
                this.classList.remove('btn-warning');
                this.classList.add('btn-outline-primary');
                this.textContent = 'Mark & Save For Review';
            } else {
                currentTest.markedForReview.push(questionNumber);
                this.classList.remove('btn-outline-primary');
                this.classList.add('btn-warning');
                this.textContent = 'Marked For Review';
            }
            
            // Update question palette
            updateQuestionPalette();
        });
        
        document.getElementById('clearResponseBtn').addEventListener('click', function() {
            const questionNumber = currentTest.currentQuestionIndex + 1;
            delete currentTest.responses[questionNumber];
            
            // Clear selection
            document.querySelectorAll('.option-item').forEach(item => {
                item.classList.remove('selected');
                const radio = item.querySelector('input[type="radio"]');
                radio.checked = false;
            });
            
            // Update counts
            updateAnsweredCount();
            updateQuestionPalette();
        });
        
        document.getElementById('submitTestBtn').addEventListener('click', function() {
            if (confirm('Are you sure you want to submit the test?')) {
                submitTest();
            }
        });
        
        document.getElementById('quitTestBtn').addEventListener('click', function() {
            if (confirm('Are you sure you want to quit the test? Your progress will be lost.')) {
                showDashboard();
            }
        });
        
        // Dashboard navigation
        document.getElementById('logoutBtn').addEventListener('click', function() {
            if (confirm('Are you sure you want to logout?')) {
                document.getElementById('dashboardInterface').style.display = 'none';
                document.getElementById('mainContent').style.display = 'block';
                document.getElementById('mainFooter').style.display = 'block';
            }
        });
        
        document.getElementById('backToDashboard').addEventListener('click', function(e) {
            e.preventDefault();
            showDashboard();
        });
        
        // Initialize Dashboard Charts
        function initializeDashboard() {
            // Section Performance Chart
            const sectionCtx = document.getElementById('sectionPerformanceChart').getContext('2d');
            const sectionChart = new Chart(sectionCtx, {
                type: 'bar',
                data: {
                    labels: ['Quantitative', 'General Intelligence', 'English', 'General Awareness'],
                    datasets: [{
                        label: 'Accuracy %',
                        data: [85, 77, 80, 62],
                        backgroundColor: [
                            'rgba(54, 162, 235, 0.7)',
                            'rgba(255, 99, 132, 0.7)',
                            'rgba(255, 206, 86, 0.7)',
                            'rgba(75, 192, 192, 0.7)'
                        ],
                        borderColor: [
                            'rgba(54, 162, 235, 1)',
                            'rgba(255, 99, 132, 1)',
                            'rgba(255, 206, 86, 1)',
                            'rgba(75, 192, 192, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100
                        }
                    }
                }
            });
            
            // Progress Chart
            const progressCtx = document.getElementById('progressChart').getContext('2d');
            const progressChart = new Chart(progressCtx, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr'],
                    datasets: [{
                        label: 'All India Rank',
                        data: [4500, 3200, 2100, 1245],
                        borderColor: 'rgba(78, 115, 223, 1)',
                        backgroundColor: 'rgba(78, 115, 223, 0.1)',
                        fill: true,
                        tension: 0.3
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            reverse: true,
                            beginAtZero: false
                        }
                    }
                }
            });
        }
        
        // Initialize Test Analysis Charts
        function initializeTestAnalysis() {
            // Score Distribution Chart
            const scoreCtx = document.getElementById('scoreDistributionChart').getContext('2d');
            const scoreChart = new Chart(scoreCtx, {
                type: 'bar',
                data: {
                    labels: ['0-50', '51-100', '101-150', '151-200'],
                    datasets: [{
                        label: 'Number of Students',
                        data: [1200, 3500, 2800, 500],
                        backgroundColor: 'rgba(28, 200, 138, 0.7)',
                        borderColor: 'rgba(28, 200, 138, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        }
        // Add this at top of script section
const scriptUrl = 'https://script.google.com/macros/s/AKfycbxXevBaEkx14FL0sz4JY5gaYZFJx38NFrK-jc8N3gxbKkL3UQi_7HTESGVLZ0G6vHGR/exec';

function callGoogleScript(functionName, params) {
  return fetch(scriptUrl + `?fn=${functionName}`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(params)
  }).then(res => res.json());
}
    
        
        // Show dashboard
        function showDashboard() {
            // Hide other interfaces
            document.getElementById('testInterface').style.display = 'none';
            document.getElementById('testAnalysisInterface').style.display = 'none';
            document.getElementById('mainContent').style.display = 'none';
            
            // Show dashboard
            document.getElementById('dashboardInterface').style.display = 'block';
            document.getElementById('mainFooter').style.display = 'block';
            
            // Initialize charts
            initializeDashboard();
        }
        
        // Show test analysis
        function showTestAnalysis() {
            // Hide other interfaces
            document.getElementById('dashboardInterface').style.display = 'none';
            document.getElementById('testInterface').style.display = 'none';
            document.getElementById('mainContent').style.display = 'none';
            
            // Show test analysis
            document.getElementById('testAnalysisInterface').style.display = 'block';
            document.getElementById('mainFooter').style.display = 'block';
            
            // Initialize charts
            initializeTestAnalysis();
        }
        
        // Start a test
        function startTest(testId) {
            // Set up test
            currentTest = {
                id: testId,
                questions: demoQuestions,
                currentQuestionIndex: 0,
                responses: {},
                markedForReview: [],
                startTime: new Date(),
                timerInterval: null
            };
            
            // Hide other interfaces
            document.getElementById('dashboardInterface').style.display = 'none';
            document.getElementById('testAnalysisInterface').style.display = 'none';
            document.getElementById('mainContent').style.display = 'none';
            document.getElementById('mainFooter').style.display = 'none';
            
            // Show test interface
            document.getElementById('testInterface').style.display = 'block';
            
            // Set test title based on ID
            let testTitle = "Quantitative Aptitude Test";
            if (testId === "ssc1") testTitle = "SSC CGL Tier-I Mock Test";
            else if (testId === "neet1") testTitle = "NEET 2024 Mock Test";
            else if (testId === "gate1") testTitle = "GATE 2025 Mock Test";
            
            document.getElementById('testTitle').textContent = testTitle;
            document.getElementById('totalQuestions').textContent = demoQuestions.length;
            
            // Initialize question palette
            const palette = document.getElementById('questionPalette');
            palette.innerHTML = '';
            
            for (let i = 0; i < demoQuestions.length; i++) {
                const col = document.createElement('div');
                col.className = 'col-2 col-md-1';
                const btn = document.createElement('button');
                btn.className = 'btn btn-sm btn-outline-primary w-100 mb-2';
                btn.textContent = i + 1;
                btn.addEventListener('click', function() {
                    navigateToQuestion(i);
                });
                col.appendChild(btn);
                palette.appendChild(col);
            }
            
            // Start timer
            let timeLeft = 30 * 60; // 30 minutes
            const timer = document.getElementById('testTimer');
            
            currentTest.timerInterval = setInterval(function() {
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                timer.textContent = `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
                
                if (timeLeft <= 0) {
                    clearInterval(currentTest.timerInterval);
                    submitTest();
                } else {
                    timeLeft--;
                }
            }, 1000);
            
            // Load first question
            loadQuestion(0);
        }
        
        // Load a question
        function loadQuestion(index) {
            if (index < 0 || index >= currentTest.questions.length) return;
            
            currentTest.currentQuestionIndex = index;
            const question = currentTest.questions[index];
            
            // Update question display
            document.getElementById('currentQuestionNumber').textContent = index + 1;
            document.getElementById('questionText').textContent = question.text;
            
            // Update options
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            
            for (let i = 0; i < question.options.length; i++) {
                const optionItem = document.createElement('div');
                optionItem.className = 'option-item';
                optionItem.setAttribute('data-option', i + 1);
                
                const radio = document.createElement('input');
                radio.type = 'radio';
                radio.name = 'questionOption';
                radio.id = `option${i + 1}`;
                radio.className = 'me-2';
                
                // Check if this option was selected
                if (currentTest.responses[index + 1] === i + 1) {
                    radio.checked = true;
                    optionItem.classList.add('selected');
                }
                
                const label = document.createElement('label');
                label.htmlFor = `option${i + 1}`;
                label.textContent = question.options[i];
                
                optionItem.appendChild(radio);
                optionItem.appendChild(label);
                
                // Add click event
                optionItem.addEventListener('click', function() {
                    const options = document.querySelectorAll('.option-item');
                    options.forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');
                    radio.checked = true;
                    
                    // Save response
                    currentTest.responses[index + 1] = i + 1;
                    updateAnsweredCount();
                });
                
                optionsContainer.appendChild(optionItem);
            }
            
            // Update mark for review button
            const markBtn = document.getElementById('markForReviewBtn');
            if (currentTest.markedForReview.includes(index + 1)) {
                markBtn.classList.remove('btn-outline-primary');
                markBtn.classList.add('btn-warning');
                markBtn.textContent = 'Marked For Review';
            } else {
                markBtn.classList.remove('btn-warning');
                markBtn.classList.add('btn-outline-primary');
                markBtn.textContent = 'Mark & Save For Review';
            }
            
            // Update question palette
            updateQuestionPalette();
        }
        
        // Navigate to a specific question
        function navigateToQuestion(index) {
            loadQuestion(index);
        }
        
        // Navigate to next/previous question
        function navigateQuestion(direction) {
            const newIndex = currentTest.currentQuestionIndex + direction;
            if (newIndex >= 0 && newIndex < currentTest.questions.length) {
                loadQuestion(newIndex);
            }
        }
        
        // Update answered count
        function updateAnsweredCount() {
            const answered = Object.keys(currentTest.responses).length;
            document.getElementById('answeredCount').textContent = answered;
        }
        
        // Update question palette
        function updateQuestionPalette() {
            const paletteButtons = document.querySelectorAll('#questionPalette button');
            
            for (let i = 0; i < paletteButtons.length; i++) {
                const questionNumber = i + 1;
                const btn = paletteButtons[i];
                
                // Reset classes
                btn.className = 'btn btn-sm w-100 mb-2';
                
                // Current question
                if (i === currentTest.currentQuestionIndex) {
                    btn.classList.add('btn-primary');
                } 
                // Answered questions
                else if (currentTest.responses[questionNumber]) {
                    btn.classList.add('btn-success');
                }
                // Marked for review
                else if (currentTest.markedForReview.includes(questionNumber)) {
                    btn.classList.add('btn-warning');
                }
                // Unanswered questions
                else {
                    btn.classList.add('btn-outline-primary');
                }
            }
        }
        
        // Submit test
        function submitTest() {
            clearInterval(currentTest.timerInterval);
            
            // Calculate score (for demo purposes)
            let score = 0;
            let correctAnswers = 0;
            let wrongAnswers = 0;
            
            currentTest.questions.forEach((q, index) => {
                const questionNumber = index + 1;
                if (currentTest.responses[questionNumber]) {
                    if (currentTest.responses[questionNumber] === q.correctAnswer + 1) {
                        score += 3; // 3 marks for correct answer
                        correctAnswers++;
                    } else {
                        score -= 1; // -1 for wrong answer
                        wrongAnswers++;
                    }
                }
            });
            
            // For demo, show test analysis
            showTestAnalysis();
        }
        
        // For demo - automatically show dashboard on page load
        window.addEventListener('load', function() {
            // Uncomment this line to automatically show dashboard (for demo)
            // showDashboard();
        });
    </script>
    <script>
        
// Global State
let currentUser = null;
let currentTest = null;
let timerInterval = null;

// Auth Handlers
document.getElementById('loginForm').addEventListener('submit', async (e) => {
  e.preventDefault();
  const email = document.getElementById('loginEmail').value;
  const password = document.getElementById('loginPassword').value;
  
  try {
    const response = await google.script.run.withSuccessHandler(handleLogin).loginUser(email, password);
  } catch (error) {
    alert(error.message);
  }
});

document.getElementById('signupForm').addEventListener('submit', async (e) => {
  e.preventDefault();
  const formData = {
    name: document.getElementById('signupName').value,
    email: document.getElementById('signupEmail').value,
    password: document.getElementById('signupPassword').value,
    category: document.getElementById('signupExamCategory').value
  };
  
  try {
    const response = await google.script.run.withSuccessHandler(handleSignup).registerUser(formData);
  } catch (error) {
    alert(error.message);
  }
});

// Test Handling
document.querySelectorAll('.start-test').forEach(btn => {
  btn.addEventListener('click', async (e) => {
    const testId = e.target.dataset.testId;
    currentTest = {
      id: testId,
      questions: await google.script.run.withSuccessHandler(getTestQuestions).getTestQuestions(testId),
      responses: {},
      startTime: Date.now()
    };
    showTestInterface();
    startTimer(1800); // 30 minutes
  });
});

// Submit Test
document.getElementById('submitTestBtn').addEventListener('click', () => {
  clearInterval(timerInterval);
  calculateResults();
});

// Helper Functions
function handleLogin(response) {
  if (response.success) {
    currentUser = response.user;
    showDashboard();
  } else {
    alert(response.message);
  }
}

function showDashboard() {
  // Fetch and display user data
  document.getElementById('mainContent').style.display = 'none';
  document.getElementById('dashboardInterface').style.display = 'block';
  loadDashboardData();
}

async function loadDashboardData() {
  const tests = await google.script.run.withSuccessHandler().getUpcomingTests());
  // Render tests in dashboard
}

function showTestInterface() {
  document.getElementById('mainContent').style.display = 'none';
  document.getElementById('testInterface').style.display = 'block';
  renderQuestion(0);
}

function renderQuestion(index) {
  const question = currentTest.questions[index];
  // Update question text and options
}

function startTimer(seconds) {
  let remaining = seconds;
  timerInterval = setInterval(() => {
    const mins = Math.floor(remaining / 60);
    const secs = remaining % 60;
    document.getElementById('testTimer').textContent = 
      `${mins}:${secs.toString().padStart(2, '0')}`;
    
    if (--remaining < 0) {
      clearInterval(timerInterval);
      calculateResults();
    }
  }, 1000);
}

function calculateResults() {
  let correct = 0;
  currentTest.questions.forEach((q, index) => {
    if (currentTest.responses[index] === q[7]) correct++;
  });
  
  const resultData = {
    userId: currentUser.id,
    testId: currentTest.id,
    score: correct * 3,
    total: currentTest.questions.length * 3,
    correct: correct,
    wrong: currentTest.questions.length - correct,
    accuracy: (correct / currentTest.questions.length * 100).toFixed(1)
  };
  
  google.script.run.withSuccessHandler(showAnalysis).saveTestResult(resultData);
}

function showAnalysis() {
  document.getElementById('testInterface').style.display = 'none';
  document.getElementById('testAnalysisInterface').style.display = 'block';
  // Load analysis data
}
</script>
</body>
</html>
